"use strict";(self.webpackChunkau=self.webpackChunkau||[]).push([[400],{3400:(ht,R,F)=>{F.r(R),F.d(R,{FormsInDepthModule:()=>pt});var C=F(1601),g=F(3065),G=F(4598),S=F(6983),u=F(7716);let H=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-fid"]],decls:2,vars:0,consts:[[1,"container-fluid","mt-3"]],template:function(o,d){1&o&&(u.TgZ(0,"section",0),u._UZ(1,"router-outlet"),u.qZA())},directives:[S.lC],styles:[""]}),t})();const w=(0,g.PH)("[Upload/UI] attach a file",(0,g.Ky)()),x=(0,g.PH)("[Upload/API] Upload file start",(0,g.Ky)());(0,g.PH)("[Upload/API] Upload file successful",(0,g.Ky)()),(0,g.PH)("[Upload/API] Upload file failed",(0,g.Ky)());let Y=(()=>{class t{constructor(o){this.store=o}attachFile(o,d){this.store.dispatch(w({file:o,fileId:d}))}}return t.\u0275fac=function(o){return new(o||t)(u.LFG(g.yh))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var N=F(5618),D=F(8295),X=F(9983),W=F(1095),$=F(6627);const V=["uploadInput"],q=[{path:"",component:H,children:[{path:"",redirectTo:"reactive",pathMatch:"full"},{path:"reactive",component:(()=>{class t{constructor(o){this.fs=o}ngOnInit(){}onUploadFileChange(o){var d;const y=null===(d=o.target)||void 0===d?void 0:d.files;if(y){const h=Object.assign({},y);Object.keys(h).forEach(E=>{this.fs.attachFile(h[E],(new Date).getTime()+E+"")})}}onUploadClick(){var o;const d=null===(o=this.uploadInput)||void 0===o?void 0:o.nativeElement;d&&d.click()}}return t.\u0275fac=function(o){return new(o||t)(u.Y36(Y))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-fid-reactive"]],viewQuery:function(o,d){if(1&o&&u.Gf(V,5),2&o){let y;u.iGM(y=u.CRH())&&(d.uploadInput=y.first)}},decls:13,vars:1,consts:[["fxLayout","column","fxLayoutAlign","start start","fxLayoutGap","20px",1,"parent","w-100"],["fxLayout","column","fxLayoutAlign","start start","fxLayoutGap","5px",1,"w-100"],["type","file","multiple","",1,"upload-input",3,"change"],["uploadInput",""],["appearance","standard",1,""],["matInput","","type","text",3,"disabled"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(o,d){1&o&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u._uU(2," Reactive Forms "),u.qZA(),u.TgZ(3,"div"),u._uU(4," Uploading files: "),u.qZA(),u.TgZ(5,"div"),u.TgZ(6,"input",2,3),u.NdJ("change",function(h){return d.onUploadFileChange(h)}),u.qZA(),u.TgZ(8,"mat-form-field",4),u._UZ(9,"input",5),u.TgZ(10,"button",6),u.NdJ("click",function(){return d.onUploadClick()}),u.TgZ(11,"mat-icon"),u._uU(12,"attach_file"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&o&&(u.xp6(9),u.Q6J("disabled",!0))},directives:[N.xw,N.Wh,N.SQ,D.KE,X.Nt,W.lW,D.R9,$.Hw],styles:[".upload-input[_ngcontent-%COMP%]{display:none}"]}),t})(),data:{pageTitle:"Reactive Forms"}}]}];let _=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[S.Bz.forChild(q)],S.Bz]}),t})();var tt=F(8002);const et=[(()=>{class t{constructor(o){this.actions$=o,this.attachFileForUpload$=(0,C.GW)(()=>this.actions$.pipe((0,C.l4)(w),(0,tt.U)(d=>x({fileId:d.fileId,file:d.file}))),{dispatch:!0})}}return t.\u0275fac=function(o){return new(o||t)(u.LFG(C.eX))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac}),t})()];var r=(()=>{return(t=r||(r={}))[t.EntitiesOnly=0]="EntitiesOnly",t[t.Both=1]="Both",t[t.None=2]="None",r;var t})();function p(t){return function(o,d){const y={ids:[...d.ids],entities:Object.assign({},d.entities)},h=t(o,y);return h===r.Both?Object.assign({},d,y):h===r.EntitiesOnly?Object.assign(Object.assign({},d),{entities:y.entities}):d}}function v(t,a){const o=a(t);return(0,u.X6Q)()&&void 0===o&&console.warn("@ngrx/entity: The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",t,"The `selectId` implementation:",a.toString()),o}function P(t){function a(l,i){const n=v(l,t);return n in i.entities?r.None:(i.ids.push(n),i.entities[n]=l,r.Both)}function o(l,i){let n=!1;for(const e of l)n=a(e,i)!==r.None||n;return n?r.Both:r.None}function y(l,i){const n=v(l,t);return n in i.entities?(i.entities[n]=l,r.EntitiesOnly):(i.ids.push(n),i.entities[n]=l,r.Both)}function E(l,i){const e=(l instanceof Array?l:i.ids.filter(s=>l(i.entities[s]))).filter(s=>s in i.entities).map(s=>delete i.entities[s]).length>0;return e&&(i.ids=i.ids.filter(s=>s in i.entities)),e?r.Both:r.None}function B(l,i){return U([l],i)}function U(l,i){const n={};return(l=l.filter(s=>s.id in i.entities)).length>0?l.filter(c=>function(l,i,n){const s=Object.assign({},n.entities[i.id],i.changes),c=v(s,t),f=c!==i.id;return f&&(l[i.id]=c,delete n.entities[i.id]),n.entities[c]=s,f}(n,c,i)).length>0?(i.ids=i.ids.map(c=>n[c]||c),r.Both):r.EntitiesOnly:r.None}function T(l,i){const n=[],e=[];for(const f of l){const m=v(f,t);m in i.entities?e.push({id:m,changes:f}):n.push(f)}const s=U(e,i),c=o(n,i);switch(!0){case c===r.None&&s===r.None:return r.None;case c===r.Both||s===r.Both:return r.Both;default:return r.EntitiesOnly}}return{removeAll:function(l){return Object.assign({},l,{ids:[],entities:{}})},addOne:p(a),addMany:p(o),setAll:p(function(l,i){return i.ids=[],i.entities={},o(l,i),r.Both}),setOne:p(y),setMany:p(function(l,i){const n=l.map(e=>y(e,i));switch(!0){case n.some(e=>e===r.Both):return r.Both;case n.some(e=>e===r.EntitiesOnly):return r.EntitiesOnly;default:return r.None}}),updateOne:p(B),updateMany:p(U),upsertOne:p(function(l,i){return T([l],i)}),upsertMany:p(T),removeOne:p(function(l,i){return E([l],i)}),removeMany:p(E),map:p(function(l,i){return U(i.ids.reduce((s,c)=>{const f=l(i.entities[c]);return f!==i.entities[c]&&s.push({id:c,changes:f}),s},[]).filter(({id:s})=>s in i.entities),i)}),mapOne:p(function({map:l,id:i},n){const e=n.entities[i];return e?B({id:i,changes:l(e)},n):r.None})}}const K=function(t={}){const{selectId:a,sortComparer:o}=Object.assign({sortComparer:!1,selectId:M=>M.id},t),d={getInitialState:function(a={}){return Object.assign({ids:[],entities:{}},a)}},y={getSelectors:function(a){const o=M=>M.ids,d=M=>M.entities,y=(0,g.P1)(o,d,(M,E)=>M.map(I=>E[I])),h=(0,g.P1)(o,M=>M.length);return a?{selectIds:(0,g.P1)(a,o),selectEntities:(0,g.P1)(a,d),selectAll:(0,g.P1)(a,y),selectTotal:(0,g.P1)(a,h)}:{selectIds:o,selectEntities:d,selectAll:y,selectTotal:h}}},h=o?function(t,a){const{removeOne:o,removeMany:d,removeAll:y}=P(t);function h(n,e){return M([n],e)}function M(n,e){const s=n.filter(c=>!(v(c,t)in e.entities));return 0===s.length?r.None:(i(s,e),r.Both)}function I(n,e){const s=v(n,t);return s in e.entities?(e.ids=e.ids.filter(c=>c!==s),i([n],e),r.Both):h(n,e)}function B(n,e){return b([n],e)}function b(n,e){const s=[],c=n.filter(f=>function(n,e,s){if(!(e.id in s.entities))return!1;const f=Object.assign({},s.entities[e.id],e.changes),m=v(f,t);return delete s.entities[e.id],n.push(f),m!==e.id}(s,f,e)).length>0;if(0===s.length)return r.None;{const f=e.ids,m=[];return e.ids=e.ids.filter((O,A)=>O in e.entities||(m.push(A),!1)),i(s,e),!c&&m.every(O=>e.ids[O]===f[O])?r.EntitiesOnly:r.Both}}function l(n,e){const s=[],c=[];for(const O of n){const A=v(O,t);A in e.entities?c.push({id:A,changes:O}):s.push(O)}const f=b(c,e),m=M(s,e);switch(!0){case m===r.None&&f===r.None:return r.None;case m===r.Both||f===r.Both:return r.Both;default:return r.EntitiesOnly}}function i(n,e){n.sort(a);const s=[];let c=0,f=0;for(;c<n.length&&f<e.ids.length;){const m=n[c],O=v(m,t),A=e.ids[f];a(m,e.entities[A])<=0?(s.push(O),c++):(s.push(A),f++)}e.ids=s.concat(c<n.length?n.slice(c).map(t):e.ids.slice(f)),n.forEach((m,O)=>{e.entities[t(m)]=m})}return{removeOne:o,removeMany:d,removeAll:y,addOne:p(h),updateOne:p(B),upsertOne:p(function(n,e){return l([n],e)}),setAll:p(function(n,e){return e.entities={},e.ids=[],M(n,e),r.Both}),setOne:p(I),setMany:p(function(n,e){const s=n.map(c=>I(c,e));switch(!0){case s.some(c=>c===r.Both):return r.Both;case s.some(c=>c===r.EntitiesOnly):return r.EntitiesOnly;default:return r.None}}),addMany:p(M),updateMany:p(b),upsertMany:p(l),map:p(function(n,e){return b(e.ids.reduce((c,f)=>{const m=n(e.entities[f]);return m!==e.entities[f]&&c.push({id:f,changes:m}),c},[]),e)}),mapOne:p(function({map:n,id:e},s){const c=s.entities[e];return c?B({id:e,changes:n(c)},s):r.None})}}(a,o):P(a);return Object.assign(Object.assign(Object.assign({selectId:a,sortComparer:o},d),y),h)}({selectId:function(t){return t.id},sortComparer:function(t,a){return t.attachDate&&a.attachDate?t.attachDate<a.attachDate?1:-1:1}}),ut=K.getInitialState({uploading:!1}),lt=(0,g.Lq)(ut,(0,g.on)(x,(t,{file:a,fileId:o})=>{const d={attachDate:(new Date).getTime(),dateModified:a.lastModified,file:a,fileName:a.name,fileSize:a.size,id:o};return console.log(d),K.addOne(d,Object.assign(Object.assign({},t),{loading:!0}))}));function dt(t,a){return lt(t,a)}let pt=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({providers:[],imports:[[G.n,g.Aw.forFeature("uploadFiles",dt),C.sQ.forFeature(et),_]]}),t})()}}]);